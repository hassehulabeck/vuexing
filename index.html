<html>
<head>
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  <script src="https://unpkg.com/vuex@3.0.1/dist/vuex.js"></script>
</head>
<body>
  <div id="app">
    <mini-counter></mini-counter>
  </div>
</body>
</html>
<script>
  const store = new Vuex.Store({
    state: {
      antal: 0
    },
    mutations: {
      inc (state) {
        state.antal++
      },
      /* Vi kan skriva en mutation på två olika sätt.
      Dels som vanlig funktion (ovan),
      dels som arrow function (nedan).
      */
      dec: state => state.antal--
    }
  })
  var miniCounter = Vue.component('mini-counter', {
    template:
      `<div>
        <p> {{ antal }} </p>
        <button @click="increment">+</button>
        <button @click="decrement">-</button>
      </div>`
    ,
    computed: {
      antal () {
        return this.$store.state.antal
      }
    },
    methods: {
      increment () {
        store.commit('inc')
      },
      decrement () {
        store.commit('dec')
      }
    }

  })

  const app = new Vue({
    el: "#app",
    store,
    components: {
      miniCounter
    }
  })


</script>
